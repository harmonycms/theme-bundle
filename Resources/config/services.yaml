services:
  _defaults:
    public: false
    autowire: true
    autoconfigure: true
    bind:
      string $projectDir: '%kernel.project_dir%'
      $settingsRouter: '@Helis\SettingsManagerBundle\Settings\SettingsRouter'
      $activeTheme: '@liip_theme.active_theme'
      Symfony\Component\Config\FileLocatorInterface $locator: '@liip_theme.templating_locator'
      Symfony\Component\Templating\TemplateNameParserInterface $parser: '@templating.filename_parser'

  twig.extension.assets:
    class: Harmony\Bundle\ThemeBundle\Twig\AssetsExtension
  Harmony\Bundle\ThemeBundle\Twig\AssetsExtension: '@twig.extension.assets'

  Harmony\Bundle\ThemeBundle\Command\ThemeAssetsInstallCommand: ~

  liip_theme.theme_request_listener:
    class: Harmony\Bundle\ThemeBundle\EventListener\ThemeRequestListener
    tags:
      - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest }
  Harmony\Bundle\ThemeBundle\EventListener\ThemeRequestListener: '@liip_theme.theme_request_listener'

  twig.loader.filesystem:
    class: Harmony\Bundle\ThemeBundle\Twig\Loader\FilesystemLoader
  Harmony\Bundle\ThemeBundle\Twig\Loader\FilesystemLoader: '@twig.loader.filesystem'

  liip_theme.file_locator:
    class: Harmony\Bundle\ThemeBundle\Locator\FileLocator
    arguments:
      $pathPatterns: '%liip_theme.path_patterns%'
  Harmony\Bundle\ThemeBundle\Locator\FileLocator: '@liip_theme.file_locator'

  Harmony\Bundle\ThemeBundle\Provider\ThemeProviderFactory:
    arguments:
      $serializer: '@settings_manager.serializer'
    tags:
      - { name: settings_manager.provider_factory, provider: theme, priority: 5 }